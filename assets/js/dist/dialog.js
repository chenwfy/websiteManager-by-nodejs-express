!function(e,t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","exports"],function(i,n){e.dialog=t(n,i)});else if("undefined"!=typeof exports){var i=require("jquery");t(exports,i)}else e.dialog=t(e,"undefined"!=typeof jQuery?jQuery:window.Zepto)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var i={animateTime:200,boderWidth:1,titleHeight:40,bottomHeight:48,contentPadding:8,iconWidth:48,layerZIndex:999999,layerIndex:10,layerIdPrefixed:"dialogLayer_Shadow_",layerFramePrefixed:"dialogLayer_Frame_"},n=function(){return{width:t(window).width(),height:t(window).height()}},o=function(e,o,r,h,s,u,c,p,f){i.layerZIndex+=10,i.layerIndex+=10;var m=n(),w=o+2*i.boderWidth,g=r+i.titleHeight,x=!0,v=i.layerZIndex,y=i.layerIdPrefixed+i.layerIndex,b=t("<div>").addClass("dlayer-layer").css({"z-index":v}).attr({id:y}),T=t("<div>").addClass("wapper").css({width:o+"px",height:g+"px",left:(m.width-w)/2+"px",top:(m.height-g)/2+"px"}),C=t("<div>").addClass("title").append("<h1>"+e+"</h1>").appendTo(T),k=t("<p>").append().appendTo(C),I=null;t("<a>").addClass("close").attr({href:"javascript:void(0)",title:"\u5173\u95ed"}).on("click",function(){l(f)}).appendTo(k),h?(s&&s.css({height:r}),p&&p.attr({id:i.layerFramePrefixed+i.layerIndex}),I=t("<a>").addClass("minSize").attr({href:"javascript:void(0)",title:"\u5168\u5c4f\u67e5\u770b"}).on("click",function(){d(T,I,w,g,s,function(e){x=e})}).appendTo(k)):s&&s.css({height:r-i.bottomHeight-2*i.contentPadding}),C.on("dragstart",function(e){x&&a("start",e,T,w,g),x&&h&&c&&p&&(p.hide(),c.show())}).on("drag",function(e){x&&a("moving",e,T,w,g)}).on("dragend",function(e){x&&a("end",e,T,w,g),x&&h&&c&&p&&(c.hide(),p.show())}).on("dblclick",function(){I&&d(T,I,w,g,s,function(e){x=e})}),b.append(T.append(s||"",u||"")).appendTo(document.body).fadeIn(i.animateTime)},a=function(e,t,i,o,a){var d=0,l=0,r=n();"start"==e?(d=(r.width-o)/2,l=(r.height-a)/2):(d=t.offsetX,5>d&&(d=5),d+o+5>r.width&&(d=r.width-o-5),l=t.offsetY,5>l&&(l=5),l+a+5>r.height&&(l=r.height-a-5)),i.css({left:d+"px",top:l+"px"})},d=function(e,t,o,a,d,l){var r,h,s,u,c;t.hasClass("dis")||(t.addClass("dis"),r=n(),h=0,s=0,t.hasClass("minSize")&&(h=r.width-10-2*i.boderWidth,s=r.height-10-2*i.boderWidth,e.animate({left:"5px",top:"5px",width:h+"px",height:s+"px"},i.animateTime,null,function(){t.removeClass("dis").removeClass("minSize").addClass("maxSize").attr("title","\u9000\u51fa\u5168\u5c4f"),d&&d.css({height:s-i.titleHeight+"px"}),l&&l(!1)})),t.hasClass("maxSize")&&(h=o-2*i.boderWidth,s=a-2*i.boderWidth,u=(r.width-o)/2,c=(r.height-a)/2,e.animate({left:u+"px",top:c+"px",width:h+"px",height:s+"px"},i.animateTime,null,function(){t.removeClass("dis").removeClass("maxSize").addClass("minSize").attr("title","\u5168\u5c4f\u67e5\u770b"),d&&d.css({height:s-i.titleHeight+"px"}),l&&l(!0)})))},l=function(e){var n=t("#"+i.layerIdPrefixed+i.layerIndex);n&&n.length>0&&n.fadeOut(i.animateTime,function(){i.layerZIndex-=10,i.layerIndex-=10,n.remove(),e&&e()})},r=function(e,n,a,d,r,h,s,u,c,p,f){var m,w=t("<div>").addClass("content"),g=(t("<p>").addClass(n).appendTo(w),t("<div>").css({width:d-2*i.boderWidth-2*i.contentPadding-i.iconWidth+"px"}).html("<div>"+a+"</div>").appendTo(w),t("<div>").addClass("bottom")),x=t("<button>").html(h).appendTo(g);s&&x.addClass(s),x.on("click",function(){l(u)}),c&&(m=t("<button>").html(c).appendTo(g),p&&m.addClass(p),m.on("click",function(){l(f)})),o(e,d,r,!1,w,g,null,null,f||u)},h=function(e){var t=e||"\u63d0\u793a\u4fe1\u606f",i=arguments[1]||{},n=i.title||"\u9875\u9762\u63d0\u793a",o=~~i.width||300,a=~~i.height||150,d=i.buttonTxt||"\u786e\u5b9a",l=i.buttonStyle||"",h=i.callback||null;r(n,"alert",t,o,a,d,l,h,null,null,null)},s=function(e){var t=e||"\u786e\u8ba4\u4fe1\u606f",i=arguments[1]||{},n=i.title||"\u9875\u9762\u63d0\u793a",o=~~i.width||300,a=~~i.height||150,d=i.buttonOkTxt||"\u786e\u5b9a",l=i.buttonOkStyle||"",h=i.buttonOkClicked||null,s=i.buttonCancelTxt||"\u53d6\u6d88",u=i.buttonCancelStyle||"",c=i.buttonCancelClicked||null;r(n,"confirm",t,o,a,d,l,h,s,u,c)},u=function(e){var t=e||"\u63d0\u793a\u4fe1\u606f",i=arguments[1]||{},n=i.title||"\u9875\u9762\u63d0\u793a",o=~~i.width||300,a=~~i.height||150,d=i.buttonTxt||"\u77e5\u9053\u4e86",l=i.buttonStyle||"",h=i.callback||null;r(n,"error",t,o,a,d,l,h,null,null,null)},c=function(e){var t=e||"\u63d0\u793a\u4fe1\u606f",i=arguments[1]||{},n=i.title||"\u9875\u9762\u63d0\u793a",o=~~i.width||300,a=~~i.height||150,d=i.buttonTxt||"\u77e5\u9053\u4e86",l=i.buttonStyle||"",h=i.callback||null;r(n,"right",t,o,a,d,l,h,null,null,null)},p=function(e,n,a,d,l){if(!e)return void h("\u8bf7\u6307\u5b9a\u9875\u9762\uff01");var r=t("<div>").addClass("frame"),s=t("<div>").addClass("loading").appendTo(r),u=t("<iframe>").attr({src:e,frameborder:0,width:"100%",height:"100%",scroll:"auto"}).css("display","none").appendTo(r),c=u[0];c.attachEvent?c.attachEvent("onload",function(){window.setTimeout(function(){s.hide(),u.show()}),i.animateTime}):c.onload=function(){window.setTimeout(function(){s.hide(),u.show()}),i.animateTime},l&&(c.callback=l),o(n,a,d,!0,r,null,s,u,l)},f=function(e,t,i,n,o){p(e,t||"\u6253\u5f00\u7a97\u53e3",~~i||800,~~n||600,o)},m=function(e,t,i,n,o){p(e,t||"\u9009\u62e9\u6587\u4ef6",~~i||800,~~n||600,o)},w=function(){var e=t("#"+i.layerFramePrefixed+i.layerIndex);return e&&e.length>0?e[0].contentWindow:null},g=function(e){var i=arguments[1]||{},n=i.width||268,o=i.height||48,a=i.lineHeight||48,d=i.bottom||120,l="number"==typeof i.showTime?~~i.showTime:3e3,r=i.callback||null,h={width:n+"px","min-height":o+"px","line-height":a+"px","margin-left":-((n+32)/2)+"px",bottom:d+"px"},s=t("<div>").addClass("dlayer-toast").css(h).html(e).appendTo(document.body);l>0?window.setTimeout(function(){s.hide().remove(),r&&r()},l):r&&r.call(s)},x=function(e,i,o){var a=null,d=300,l=300,r=null,h=function(){a=t("#Top_Layer_PicturePreview"),a&&a.length>0?a.children().remove()&&a.hide():a=t("<div>").addClass("dlayer-picturePreview").attr("id","Top_Layer_PicturePreview").appendTo(document.body),a.on("mouseenter",function(){r&&window.top.clearTimeout(r)}).on("mouseleave",function(){r=window.top.setTimeout(function(){a&&a.children().remove()&&a.hide()},50)})},s=function(){var t,s,u,c,p,f,m,w,g,x,v,y;!i&&"input"===e[0].tagName.toLowerCase()&&(i=e.val()),i&&(t=e.getOffset(o),s=e.outerWidth(),u=e.outerHeight(),c=n(),p=t.top+u+4,f=t.left,m=t.top,w=c.height-p,g=d,x=l,l>w&&(m>l?p=m-l:w>=m?g=x=w:(g=x=m,p=0)),f+g>c.width&&(f=c.width-g,0>=f&&(f=0)),v='<a href="'+i+'" target="_blank"><img src="'+i+'" ></a>',y={left:f+"px",top:p+"px",width:g-10+"px",height:x-10+"px","line-height":x-10+"px"},h(),a.append(v).css(y).show(),r&&window.top.clearTimeout(r))},u=function(){r=window.top.setTimeout(function(){a&&a.children().remove()&&a.hide()},50)};e.on("mouseenter",s).on("mouseleave",u)};return{alert:h,confirm:s,error:u,success:c,openWindow:f,fileView:m,dialogWindow:w,close:l,toast:g,picurePreview:x}});